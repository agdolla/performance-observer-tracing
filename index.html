<!DOCTYPE html>
<html>
<head>
<script src="style_mutation_event.js"></script>
<script src="performance_timeline_emit.js"></script>
<script src="frame_timestamps.js"></script>
<script>
window.addEventListener("load", function() {
    var box = document.getElementById("box");
    box.addEventListener("styleupdate", function() {
        console.log("Style updated " + this);
    });

    document.addEventListener("click", function() {
        console.log("click");
        var now = performance.now();
        while (performance.now() < now + 1000){}
    });
});

var observer = new PerformanceObserver(function(list) {
    var perfEntries = list.getEntries();
    for (var i = 0; i < perfEntries.length; i++)
    {
        if (window.console) {
            console.log("Name: "        + perfEntries[i].name      +
                        " \nEntry Type: " + perfEntries[i].entryType +
                        " \nStart Time: " + perfEntries[i].startTime +
                        " \nDuration: "   + perfEntries[i].duration  + "\n");
        }
    }
});

performance.registerType("foo");
// subscribe to Resource-Timing and User-Timing events.
observer.observe({entryTypes: ['resource', 'mark', 'measure', 'foo', 'longFrame']});

performance.mark("FOO");
performance.emit({entryType: "foo", name:"TestPerformanceEntry"});

</script>
<style>
#box {
  width:50px;
  height:50px;
  background-color:blue;
}

#box:hover {
  background-color:red;
}
</style>
</head>
<body>
<div id="box"></div>
</body>
</html>
